{% extends "base.html" %}
{% block content %}
<form class="d-flex search-wrap mb-3" id="search-form" action="{{ url_for('search') }}" method="get">
  <input class="form-control" type="text" name="search" placeholder="Search product..."
         data-testid="search-input">
  <button class="btn btn-primary search-btn" type="submit" data-testid="search-btn">Search</button>
</form>

<div class="row g-3">
  {% for p in products %}
  <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
    <div class="card card-product h-100" data-testid="product-card">
      <img src="https://picsum.photos/seed/{{ p.id }}/600/400" class="card-img-top" alt="{{ p.name }}">
      <div class="card-body">
        <h5 class="card-title" data-testid="product-name">{{ p.name }}</h5>
        <div class="mb-3 price">${{ "%.2f"|format(p.price) }}</div>
        <form class="add-to-cart-form" action="{{ url_for('add_to_cart', pid=p.id) }}" method="post">
          <button type="submit" class="btn btn-outline-primary w-100 add-to-cart"
                  data-testid="btn-add-{{ p.id }}">Add to Cart</button>
        </form>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
